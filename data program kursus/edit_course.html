<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Kursus</title>
    <style>
      /* Reset some default styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background-color: #f4f7f6;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      /* Container for form elements */
      .container {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 500px;
        width: 100%;
        box-sizing: border-box;
      }

      /* Form header style */
      h2 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
        font-size: 24px;
      }

      /* General form styling */
      form {
        display: flex;
        flex-direction: column;
      }

      /* Form group styling */
      .form-group {
        margin-bottom: 20px;
      }

      label {
        font-size: 14px;
        font-weight: bold;
        color: #555;
        margin-bottom: 8px;
        display: block;
      }

      input[type="text"],
      input[type="number"],
      textarea {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 5px;
        box-sizing: border-box;
      }

      input[type="range"] {
        width: 100%;
        margin-top: 5px;
      }

      /* Style for cost value */
      #costValue {
        display: block;
        margin-top: 5px;
        font-size: 16px;
        font-weight: bold;
      }

      /* Button styling */
      button {
        background-color: #4caf50;
        color: #fff;
        padding: 12px 20px;
        font-size: 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 20px;
      }

      button:hover {
        background-color: #45a049;
      }

      /* Placeholder text styling */
      input::placeholder,
      textarea::placeholder {
        color: #bbb;
      }

      /* Responsive design: Make form elements responsive on smaller screens */
      @media (max-width: 600px) {
        .container {
          padding: 20px;
          width: 90%;
        }

        h2 {
          font-size: 20px;
        }

        button {
          font-size: 14px;
          padding: 10px 18px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Edit Kursus</h2>
      <form id="editCourseForm">
        <div class="form-group">
          <label for="programId">ID Program</label>
          <input
            type="text"
            id="programId"
            name="programId"
            required
            placeholder="Masukkan ID Program"
          />
        </div>

        <div class="form-group">
          <label for="programName">Nama Program</label>
          <input
            type="text"
            id="programName"
            name="programName"
            required
            placeholder="Masukkan Nama Program"
          />
        </div>

        <div class="form-group">
          <label for="duration">Durasi (bulan)</label>
          <input
            type="number"
            id="duration"
            name="duration"
            required
            placeholder="Masukkan Durasi"
          />
        </div>

        <div class="form-group">
          <label for="costRange">Biaya</label>
          <input
            type="range"
            id="costRange"
            name="cost"
            min="100000"
            max="1000000"
            step="10000"
          />
          <span id="costValue">Rp 100.000</span>
        </div>

        <div class="form-group">
          <label for="description">Deskripsi</label>
          <textarea
            id="description"
            name="description"
            required
            placeholder="Masukkan Deskripsi Program"
          ></textarea>
        </div>

        <button type="submit">Selesai Perubahan</button>
        <button type="button" id="cancelButton">Batal</button>
      </form>
    </div>

    <script>
      const costSlider = document.getElementById("costRange");
      const costValue = document.getElementById("costValue");
      const courseForm = document.getElementById("editCourseForm");
      const submitButton = document.querySelector("button");

      // Menampilkan nilai dari slider biaya secara dinamis
      costSlider.oninput = function () {
        costValue.textContent = `Rp ${costSlider.value}`;
      };

      // Memuat data kursus untuk pengeditan jika parameter 'edit' ada di URL
      function loadCourseForEditing() {
        const urlParams = new URLSearchParams(window.location.search);
        const editIndex = urlParams.get("edit");

        if (editIndex !== null) {
          let courses = JSON.parse(localStorage.getItem("courses")) || [];
          const course = courses[editIndex];

          // Mengisi form dengan data kursus yang akan diedit
          document.getElementById("programId").value = course.programId;
          document.getElementById("programName").value = course.programName;
          document.getElementById("duration").value = course.duration;
          costSlider.value = course.cost;
          costValue.textContent = `Rp ${course.cost}`;
          document.getElementById("description").value = course.description;

          // Mengubah teks tombol submit menjadi 'Selesai Perubahan'
          submitButton.textContent = "Selesai Perubahan";
        }
      }

      // Menyimpan data setelah pengeditan
      courseForm.addEventListener("submit", function (event) {
        event.preventDefault();

        const programId = document.getElementById("programId").value;
        const programName = document.getElementById("programName").value;
        const duration = document.getElementById("duration").value;
        const cost = costSlider.value;
        const description = document.getElementById("description").value;

        if (!programId || !programName || !duration || !description) {
          alert("Semua kolom wajib diisi!");
          return;
        }

        const course = {
          programId,
          programName,
          duration,
          cost,
          description,
        };

        let courses = JSON.parse(localStorage.getItem("courses")) || [];
        const urlParams = new URLSearchParams(window.location.search);
        const editIndex = urlParams.get("edit");

        if (editIndex !== null) {
          courses[editIndex] = course;
        }

        // Menyimpan kembali data yang telah diubah ke localStorage
        localStorage.setItem("courses", JSON.stringify(courses));

        // Mengarahkan kembali ke halaman daftar kursus setelah pengeditan
        window.location.href = "list_courses.html";
      });

      // Memuat kursus ketika halaman pertama kali dimuat
      if (window.location.pathname.includes("input_course.html")) {
        loadCourseForEditing();
      }

      // Menangani tombol Batal
      const cancelButton = document.getElementById("cancelButton");
      if (cancelButton) {
        cancelButton.addEventListener("click", function () {
          // Mengarahkan kembali ke halaman daftar kursus tanpa menyimpan perubahan
          window.location.href = "list_courses.html";
        });
      }
    </script>
  </body>
</html>
